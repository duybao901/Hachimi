{
    "ConnectionStrings": {
        "Redis": "localhost:6379"
    },
    "JwtOption": {
        "Issuer": "http://localhost:6001",
        "Audience": "http://localhost:6001",
        "SecretKey": "oEZqUKrrKDKP7A9OtrB4GfPGJ92vLDpK", // Remove this on production environment
        "ExpireMin": 5
    },
    "ReverseProxy": {
        "Routes": {
            "AuthApiRoute": {
                "ClusterId": "authApiCluster",
                "Match": {
                    "Path": "auth-api/{**catch-all}"
                },
                "Transforms": [
                    {
                        "PathPattern": "api/{**catch-all}"
                    }
                ]
            },
            "commandApiRoute": {
                "ClusterId": "commandApiCluster",
                "AuthorizationPolicy": "authPolicy",
                "Match": {
                    "Path": "command-api/{**catch-all}"
                },
                "Transforms": [
                    {
                        "PathPattern": "api/{**catch-all}"
                    }
                ]
            },
            "queryApiPublicRoute": {
                "ClusterId": "queryApiCluster",
                "Match": {
                    "Path": "query-api/public/{**catch-all}"
                },
                "Transforms": [
                    { "PathPattern": "api/{**catch-all}" }
                ]
            },

            "queryApiProtectedRoute": {
                "ClusterId": "queryApiCluster",
                "AuthorizationPolicy": "authPolicy",
                "Match": {
                    "Path": "query-api/{**catch-all}"
                },
                "Transforms": [
                    { "PathPattern": "api/{**catch-all}" }
                ]
            }
        },
        "Clusters": {
            "authApiCluster": {
              "Destinations": {
                "Destination1": {
                  "Address": "http://localhost:6001"
                }
              }
            },
            "commandApiCluster": {
                "Destinations": {
                    "Destination1": {
                        "Address": "http://localhost:4000"
                    }
                }
            },
            "queryApiCluster": {
                "Destinations": {
                    "Destination1": {
                        "Address": "http://localhost:3000"
                    }
                }
            }
        }
    }
}
